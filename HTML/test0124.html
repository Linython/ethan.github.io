<!DOCTYPE html>
<html lang="en">
<style>
    div {
        padding: 10px;
    }
    button {
        background-color: #99CCFF;
        border: none;
        border-radius: 5px;
        width: 200px;
        height: 30px;
    }

    button:hover{
        background-color: aqua;
        color: white;
    }
</style>
<head>
    <meta charset="UTF-8">
    <meta name="text" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.21.0/d3-legend.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>
        let data01 = [[0, 22.72],[1, 22.01],[2, 21.94],[3, 21.21],[4, 21.19],[5, 20.85],[6, 20.72],[7, 20.41],[8, 20.50],[9, 20.62],[10, 20.01],[11, 19.55],[12, 18.68],[13, 18.07],[14, 18.03],[15, 18.26],[16, 19.03],[17, 20.25],[18, 21.16],[19, 21.83],[20, 22.32],[21, 22.46],[22, 23.05],[23, 22.61],[24, 22.42],[25, 22.92]]
        let data02 = [[0, 22.42],[1, 22.10],[2, 22.30],[3, 21.49],[4, 21.36],[5, 21.18],[6, 21.56],[7, 21.93],[8, 21.82],[9, 22.49],[10, 22.30],[11, 21.95],[12, 22.13],[13, 21.67],[14, 21.09],[15, 21.12],[16, 22.11],[17, 22.48],[18, 22.47],[19, 22.95],[20, 23.11],[21, 23.58],[22, 22.64],[23, 22.53],[24, 22.46],[25, 22.83]]
        let data03 = [[0, 19.27],[1, 19.19],[2, 19.11],[3, 17.97],[4, 17.48],[5, 17.32],[6, 17.19],[7, 17.22],[8, 17.47],[9, 18.50],[10, 19.37],[11, 19.16],[12, 18.56],[13, 18.65],[14, 18.49],[15, 18.36],[16, 19.45],[17, 19.97],[18, 20.05],[19, 20.81],[20, 20.64],[21, 20.62],[22, 21.06],[23, 20.85],[24, 20.95],[25, 21.12]]
        let data04 = [[0, 18.52],[1, 18.28],[2, 18.24],[3, 17.04],[4, 16.63],[5, 16.46],[6, 16.42],[7, 17.07],[8, 17.39],[9, 17.48],[10, 17.45],[11, 17.49],[12, 17.53],[13, 18.56],[14, 18.26],[15, 18.73],[16, 18.74],[17, 18.57],[18, 18.46],[19, 18.56],[20, 18.50],[21, 18.54],[22, 19.14],[23, 18.97],[24, 19.16],[25, 19.56]]

        let data05 = [[0, 19.79],[1, 19.45],[2, 20.16],[3, 19.92],[4, 19.86],[5, 20.32],[6, 19.72],[7, 20.21],[8, 20.51],[9, 18.92],[10, 18.43],[11, 18.44],[12, 18.69],[13, 18.70],[14, 19.06],[15, 18.91],[16, 19.17],[17, 20.16],[18, 20.05],[19, 20.06],[20, 20.28],[21, 20.55],[22, 20.26],[23, 20.54],[24, 20.62],[25, 20.88]]
        let data06 = [[0, 18.46],[1, 18.03],[2, 17.55],[3, 17.52],[4, 18.03],[5, 17.79],[6, 17.77],[7, 19.47],[8, 18.34],[9, 17.82],[10, 17.73],[11, 17.17],[12, 16.98],[13, 17.12],[14, 17.21],[15, 17.14],[16, 18.04],[17, 18.23],[18, 18.14],[19, 18.70],[20, 19.03],[21, 19.12],[22, 19.07],[23, 19.03],[24, 18.62],[25, 19.05]]
        let data07 = [[0, 18.79],[1, 18.79],[2, 18.82],[3, 18.92],[4, 19.61],[5, 18.73],[6, 18.43],[7, 19.23],[8, 19.03],[9, 18.57],[10, 18.39],[11, 18.42],[12, 18.36],[13, 18.63],[14, 18.62],[15, 19.23],[16, 19.49],[17, 18.89],[18, 19.14],[19, 19.35],[20, 19.56],[21, 19.42],[22, 19.46],[23, 19.50],[24, 18.86],[25, 19.25]]

        let data12 = [[0, 19.93],[1, 18.48],[2, 18.42],[3, 18.46],[4, 18.17],[5, 17.98],[6, 18.03],[7, 17.89],[8, 17.35],[9, 17.02],[10, 17.88],[11, 17.75],[12, 18.13],[13, 18.42],[14, 18.22],[15, 18.24],[16, 18.54],[17, 18.51],[18, 18.15],[19, 18.59],[20, 18.62],[21, 18.53],[22, 18.67],[23, 18.56],[24, 18.06],[25, 18.34]]
        let data13 = [[0, 20.23],[1, 18.64],[2, 18.54],[3, 17.81],[4, 17.18],[5, 16.92],[6, 16.73],[7, 16.90],[8, 17.32],[9, 17.09],[10, 17.35],[11, 17.42],[12, 18.03],[13, 17.93],[14, 17.46],[15, 17.95],[16, 18.25],[17, 18.14],[18, 17.54],[19, 18.18],[20, 18.76],[21, 18.58],[22, 18.70],[23, 19.04],[24, 18.43],[25, 18.67]]
        let data14 = [[0, 15.62],[1, 14.37],[2, 14.62],[3, 14.25],[4, 14.09],[5, 13.89],[6, 14.40],[7, 14.05],[8, 13.40],[9, 13.39],[10, 13.94],[11, 14.22],[12, 14.72],[13, 14.96],[14, 15.05],[15, 14.96],[16, 15.32],[17, 15.10],[18, 15.23],[19, 15.51],[20, 15.56],[21, 15.84],[22, 16.05],[23, 16.03],[24, 16.66],[25, 16.40]]
        let data15 = [[0, 18.09],[1, 17.52],[2, 17.52],[3, 16.67],[4, 16.03],[5, 16.61],[6, 16.92],[7, 16.83],[8, 15.32],[9, 14.96],[10, 15.01],[11, 16.35],[12, 16.78],[13, 17.96],[14, 18.05],[15, 17.37],[16, 18.35],[17, 18.15],[18, 18.51],[19, 19.08],[20, 19.30],[21, 19.79],[22, 19.55],[23, 19.71],[24, 19.66],[25, 19.80]]

        let data16 = [[0, 19.87],[1, 18.52],[2, 18.76],[3, 19.03],[4, 18.67],[5, 19.01],[6, 19.03],[7, 19.06],[8, 18.33],[9, 18.24],[10, 18.05],[11, 18.63],[12, 18.89],[13, 18.41],[14, 18.85],[15, 18.8],[16, 18.75],[17, 19.13],[18, 18.95],[19, 19.1],[20, 19.26],[21, 19.43],[22, 19.26],[23, 19.22],[24, 19.09],[25, 19.66]]
        let data17 = [[0, 20.14],[1, 18.69],[2, 19.13],[3, 18.62],[4, 18.26],[5, 19.46],[6, 19.27],[7, 19.75],[8, 19.62],[9, 18.76],[10, 18.45],[11, 18.42],[12, 18.55],[13, 18.1],[14, 18.56],[15, 18.34],[16, 18.79],[17, 19.19],[18, 19.15],[19, 19.44],[20, 19.84],[21, 20.22],[22, 20.32],[23, 20.11],[24, 20.29],[25, 20.56]]
        let data18 = [[0, 20.26],[1, 19.23],[2, 20.02],[3, 20.62],[4, 20.26],[5, 20.9],[6, 19.36],[7, 19.96],[8, 20.26],[9, 19.15],[10, 19.36],[11, 19.95],[12, 19.78],[13, 20.35],[14, 19.45],[15, 19.38],[16, 19.94],[17, 20.26],[18, 20.43],[19, 20.73],[20, 20.75],[21, 20.74],[22, 20.82],[23, 21.01],[24, 20.75],[25, 20.47]]


        // 数据点形状设置
    let tri = d3.symbol().type(d3.symbolTriangle).size(50)
    cir = d3.symbol().type(d3.symbolCircle)
    cro = d3.symbol().type(d3.symbolCross).size(50)
    dia = d3.symbol().type(d3.symbolDiamond).size(50)
    sta = d3.symbol().type(d3.symbolStar).size(50)

    // pic函数用于绘制图片的坐标轴
    function pic(max, min) {
      // 图表的宽度和高度
      let width = 600;
      let height = 600;
      // 边距
      let padding = {top: 50, right: 50, bottom: 50, left: 50};
      // 绘制坐标抽
      let xScale = d3.scaleLinear()
          .domain([0, 25])
          .range([0, width - padding.left - padding.right]);
      let yScale = d3.scaleLinear()
          .domain([min, max])
          .range([height - padding.top - padding.bottom, 0]);
      let svg = d3.select('body')
          .append('svg')
          .attr('width', width + 'px')
          .attr('height', height + 'px');
      let xAxis = d3.axisBottom()
          .ticks(25) // 显示刻度的数量，即步长。
          .scale(xScale);
      let yAxis = d3.axisLeft()
          .ticks(10)
          .scale(yScale);

      svg.append('g')
          .attr('class', 'axis')
          .attr('transform', 'translate(' + padding.left + ',' + (height - padding.bottom) + ')')
          .call(xAxis);

      svg.append('g')
          .attr('class', 'axis')
          .attr('transform', 'translate(' + padding.left + ',' + padding.top + ')')
          .call(yAxis);

      let linePath = d3.line()
          .x(function (d) {
              return xScale(d[0])
          })
          .y(function (d) {
              return yScale(d[1])
          });

      //增加一个x轴的标签
      svg.append("text")
          .attr("transform", "translate(" + width / 2 + "," + (height - padding.bottom + 40) + ")")
          .style("text-anchor", "middle")
          .style('font-size', '20px')
          .attr('fill', 'black')
          .text("Day post inject");
      //添加y轴
      svg.append("text")
          .text('Mouse weight (g)')
          .style("font-size", "20px")
          .style("text-anchor", "start")
          .attr("transform", "rotate(-90 200 180)");

        // return中的lines函数用于绘制折线图
        //   data: 绘图数据
        //   color: 折线颜色
        //   legend: 数据点形状
        //   color_line: 为折线定义一个class用于鼠标点击时的放大效果与显示数据
        //   name: 图例的文字
        //   class_legend: 为图例（legend）定义一个class用于修改每条折线图例的位置
        //   x, y: 图例的位置
      return {
          lines: function (data, color, legend, color_line, name, x, y, class_legend) {
              svg.append('g')
                  .append('path')
                  .attr('class', 'line-path')
                  .attr('transform', 'translate(' + padding.left + ',' + padding.top + ')')
                  .attr('d', linePath(data))
                  .attr('fill', 'none')
                  .attr('stroke-width', 1)
                  .attr('stroke', color);
              svg.append('g')
                  .selectAll('.triangle')
                  .data(data)
                  .enter()
                  .append('path')
                  .attr('d', legend.size(50))
                  .attr('transform', function (d) {
                      return 'translate(' + (xScale(d[0]) + padding.left) + ',' + (yScale(d[1]) + padding.top) + ')';
                  })
                  .attr('fill', color)
                  .attr('class', color_line)
              let a = "." + color_line
              svg.selectAll(a)
                  .on("mouseover", function (d, i) {
                      d3.select(this)
                          .attr("fill", "red")
                          .attr("d", legend.size(120))
                      svg.append('text')
                          .text(i[1])
                          .attr('class', 'tooltip1')
                          .attr('x', xScale(i[0]) + 40)
                          .attr('y', yScale(i[1]) + 35)
                          .attr("font-family", "sans-serif")
                          .attr("font-size", "11px")
                          .attr("fill", "red")
                  })
                  .on("mouseout", function () {
                      d3.select(this)
                          .attr("fill", color)
                          .attr('d', legend.size(50))
                      d3.select('.tooltip1').remove()
                  });
              let ordinal1 = d3.scaleOrdinal()
                  .domain([name])
                  .range([color]);
              svg.append('g')
                  .attr('class', class_legend)
                  .attr('transform', 'translate(' + x + ',' + y + ')');
              let leg_tri = d3.legendColor()
                  .shapePadding(10)
                  .scale(ordinal1);
              let b = "." + class_legend
              svg.select(b)
                  .call(leg_tri);
          }
      }
    }


    function WT0107() {
        let a = pic(max = 25, min = 14) // 绘制坐标轴系统
        a.lines(data = data01, color = 'grey', legend = tri, color_line = 'grey_line', name = 'BBR1-7 WT1', x = 300, y = 70, class_legend = 'tri') //添加折线
        a.lines(data = data02, color = 'blue', legend = cir, color_line = 'blue_line', name = 'BBR1-7 WT2', x = 300, y = 90, class_legend = 'cir') //添加折线
        a.lines(data = data03, color = '#00aee6', legend = cro, color_line = 'gb_line', name = 'BBR1-7 WT3', x = 300, y = 110, class_legend = 'cro') //添加折线
        a.lines(data = data04, color = '#8e43e7', legend = dia, color_line = 'e43e7', name = 'BBR1-7 WT4', x = 300, y = 130, class_legend = 'dia') //添加折线
    }
    function WT0814() {
        let a = pic(max = 27, min = 14)
        a.lines(data = data05, color = 'grey', legend = tri, color_line = 'grey_line', name = 'BBR8-14 WT5', x = 300, y = 70, class_legend = 'tri')
        a.lines(data = data06, color = 'blue', legend = cir, color_line = 'blue_line', name = 'BBR8-14 WT6', x = 300, y = 90, class_legend = 'cir')
        a.lines(data = data07, color = '#00aee6', legend = cro, color_line = 'gb_line', name = 'BBR8-14 WT7', x = 300, y = 110, class_legend = 'cro')
    }
    function Gng1317() {
        let a = pic(max = 25, min = 10)
        a.lines(data=data12, color='#8e43e7', legend=tri, color_line='e43e7', name='BBR1-7 Gng13-cKO1', x=300, y=130, class_legend='tri')
        a.lines(data=data13, color='#99CC99', legend=cir, color_line='ff99c', name='BBR1-7 Gng13-cKO2', x=300, y=150, class_legend='cir')
        a.lines(data=data14, color='#db5a6b', legend=cro, color_line='db5a6', name='BBR1-7 Gng13-cKO3', x=300, y=170, class_legend='cro')
        a.lines(data=data15, color='#425066', legend=dia, color_line='c4250', name='BBR1-7 Gng13-cKO4', x=300, y=190, class_legend='dia')
    }

    function Gng1381() {
            let a = pic(max=25, min=14)
        a.lines(data=data16, color='#8e43e7', legend=tri, color_line='e43e7', name='BBR8-14 Gng13-cKO5', x=300, y=130, class_legend='tri')
        a.lines(data=data17, color='#99CC99', legend=cir, color_line='ff99c', name='BBR8-14 Gng13-cKO6', x=300, y=150, class_legend='cir')
        a.lines(data=data18, color='#db5a6b', legend=cro, color_line='db5a6', name='BBR8-14 Gng13-cKO7', x=300, y=170, class_legend='cro')
    }

    </script>
</head>
<body>
<!--
    在button标签中将绘图函数与其链接
-->
    <div id="btn1">
        <button type="button" id="button1" onclick="WT0107()">BBR1-7_WT</button>
    </div>
    <div id="btn2">
        <button type="button" id="button2" onclick="WT0814()">BBR8-14_WT</button>
    </div>
    <div id="btn3">
        <button type="button" id="button3" onclick="Gng1317()">BBR1-7_Gng13</button>
    </div>
    <div id="btn4">
        <button type="button" id="button4" onclick="Gng1381()">BBR8-14_Gng13</button>
    </div>
</body>
</html>